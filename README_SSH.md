# IDS-SSH: Система обнаружения вторжений для серверов

Версия IDS-SSH (Intrusion Detection System - SSH) предназначена для работы на серверах без графического интерфейса и обеспечивает мониторинг сетевого трафика для обнаружения потенциальных угроз безопасности.

## Основные возможности

- **Работа без GUI**: оптимизирована для запуска на серверах через SSH или как системный сервис
- **Обнаружение атак**: мониторинг сетевого трафика для выявления подозрительной активности
- **Анализ пакетов**: инспекция входящих и исходящих сетевых пакетов
- **Обнаружение сканирования портов**: выявление попыток сканирования сетевых портов
- **Защита от DoS/DDoS**: обнаружение аномальной активности, характерной для атак типа "отказ в обслуживании"
- **Обнаружение брутфорс-атак**: выявление множественных попыток авторизации
- **Логирование**: запись событий безопасности и подозрительной активности
- **Интерактивный режим**: управление через консольный интерфейс
- **Режим системного сервиса**: запуск в качестве фоновой службы

## Требования

- Linux-сервер (Ubuntu, Debian, CentOS и т.д.)
- libpcap (библиотека для захвата пакетов)
- Qt6 Core (без GUI компонентов)
- Права суперпользователя (root) для захвата сетевого трафика

## Установка

### Сборка из исходного кода

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/username/Intrusion_Detection_System_IDS.git
   cd Intrusion_Detection_System_IDS
   git checkout server-ssh
   ```

2. Запустите скрипт сборки:
   ```bash
   ./build_ssh.sh
   ```

3. После успешной сборки вы можете запустить программу:
   ```bash
   sudo ./run_ssh.sh
   ```

### Установка системного сервиса

См. документацию в файле [ids-ssh-service.md](ids-ssh-service.md).

## Использование

### Запуск в интерактивном режиме

```bash
sudo ./run_ssh.sh
```

### Запуск с параметрами

```bash
sudo ./run_ssh.sh --adapter 1 --verbose
```

### Доступные опции

- `-a, --adapter <индекс>`: указание индекса сетевого интерфейса для мониторинга
- `-v, --verbose`: включение подробного режима вывода
- `-t, --test`: запуск в тестовом режиме (симуляция трафика)
- `-s, --service`: запуск как системный сервис (без интерактивного режима)
- `--help`: отображение справки

### Интерактивные команды

После запуска в интерактивном режиме доступны следующие команды:

- `help` или `?`: показать список доступных команд
- `devices` или `list`: показать список доступных сетевых интерфейсов
- `start <индекс>`: запустить захват пакетов на указанном интерфейсе
- `stop`: остановить захват пакетов
- `stats` или `status`: показать текущую статистику
- `ips`: показать список подозрительных IP-адресов
- `save [имя_файла]`: сохранить лог в файл
- `verbose` или `debug`: переключить режим подробного вывода
- `clear`: очистить список подозрительных IP-адресов
- `exit` или `quit`: выйти из программы

## Техническая информация

### Архитектура

IDS-SSH построена на основе следующих компонентов:

- **PacketHandler**: модуль захвата и анализа сетевых пакетов
- **DeviceManager**: управление сетевыми интерфейсами
- **ServerCommandHandler**: обработка консольных команд и управление системой

### Обнаруживаемые атаки

- Сканирование портов
- SYN-флуд
- UDP-флуд
- ICMP-флуд (ping-флуд)
- Брутфорс-атаки на различные сервисы
- Аномальная сетевая активность

### Файлы логов

Программа ведет логи в следующих местах:

- Стандартный вывод консоли
- Файл `ids_log.txt` в текущей директории
- При запуске как системный сервис - в системном журнале (`journalctl`)

### Конфигурация порогов обнаружения

Пороги обнаружения различных атак настроены в исходном коде и могут быть изменены при необходимости:

- SYN-флуд: 100 пакетов в минуту
- UDP-флуд: 150 пакетов в минуту
- ICMP-флуд: 50 пакетов в минуту
- Брутфорс: 10 попыток в минуту

## Безопасность

- IDS-SSH требует прав суперпользователя (root) для захвата сетевого трафика
- Программа не хранит чувствительных данных
- При обнаружении подозрительной активности информация записывается в лог

## Решение проблем

### Не удается запустить захват пакетов

Убедитесь, что:
- Запускаете программу с правами суперпользователя
- Выбранный сетевой интерфейс существует и активен
- Установлена библиотека libpcap
- Сетевой интерфейс поддерживает режим promiscuous

### Не отображаются сетевые интерфейсы

Это может быть связано с отсутствием прав или проблемами с драйверами сетевых интерфейсов. Попробуйте:
```bash
sudo ip link show
```
для отображения доступных интерфейсов.

## Лицензия

См. файл [LICENSE](LICENSE).

## Авторы

- Оригинальная IDS система
- Адаптация для SSH-серверов 